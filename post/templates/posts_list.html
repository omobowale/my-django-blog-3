{% extends 'general_layout.html' %}

{% block custom_styles %}
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        .post-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        .post-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.25);
        }
        .post-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        .post-card:hover::before {
            transform: scaleX(1);
        }
        .action-btn {
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .action-btn:hover {
            transform: scale(1.15);
        }
        .action-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        .action-btn:hover::after {
            width: 100%;
            height: 100%;
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        .stagger-1 { animation-delay: 0.1s; opacity: 0; }
        .stagger-2 { animation-delay: 0.2s; opacity: 0; }
        .stagger-3 { animation-delay: 0.3s; opacity: 0; }
        .stagger-4 { animation-delay: 0.4s; opacity: 0; }
        .stagger-5 { animation-delay: 0.5s; opacity: 0; }
        .stagger-6 { animation-delay: 0.6s; opacity: 0; }
    </style>

{% endblock %}


{% block main_content %}
    <main class="max-w-7xl mx-auto px-6 py-12 relative z-10">
        <!-- Header Section -->
        <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-10 mb-10 animate-fadeInUp">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div>
                    <h1 class="text-6xl font-extrabold gradient-text mb-3 tracking-tight">
                        My Blog
                    </h1>
                    <p class="text-gray-600 text-lg flex items-center gap-2">
                        <i class="fa fa-pen-fancy text-purple-500"></i>
                        Share your thoughts with the world
                    </p>
                </div>
                <a href="{% url 'create_post' %}" 
                   class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-4 rounded-2xl font-bold shadow-xl transition-all duration-300 hover:shadow-2xl transform hover:scale-105 flex items-center gap-3 text-lg">
                    <i class="fa fa-plus text-xl" aria-hidden="true"></i>
                    <span>Create New Post</span>
                </a>
            </div>
        </div>

        <!-- Posts Grid -->
        {% if posts %}
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8">                {% for post in posts %}
                    <div class="post-card bg-white rounded-3xl shadow-2xl overflow-hidden animate-fadeInUp stagger-{{ forloop.counter|add:1 }}">
                        <!-- Post Image -->
                        <div class="relative h-72 overflow-hidden group">
                            {% if post.image %}
                                <img class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" 
                                     src="{{ post.image.url }}" alt="{{ post.title }}" />
                            {% else %}
                                <img class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" 
                                     src="https://static.vecteezy.com/vite/assets/photo-masthead-375-BoK_p8LG.webp" alt="Placeholder" />
                            {% endif %}
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <div class="absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0">
                                <p class="text-sm font-semibold flex items-center gap-2">
                                    <i class="fa fa-eye"></i>
                                    Click to read more
                                </p>
                            </div>
                        </div>

                        <!-- Post Content -->
                        <div class="p-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-3 line-clamp-2 hover:text-purple-600 transition-colors duration-300">
                                {{ post.title }}
                            </h2>
                            <p class="text-gray-600 mb-6 line-clamp-3 leading-relaxed">
                                {{ post.content }}
                            </p>

                            <!-- Metadata -->
                            <div class="flex items-center justify-between pt-5 border-t-2 border-gray-100">
                                <div class="flex items-center text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-full">
                                    <i class="fa fa-calendar mr-2 text-purple-500"></i>
                                    <span class="font-medium">{{ post.created_at|date:"M d, Y" }}</span>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="flex gap-2">
                                    <a href="{% url 'post_detail' post.id %}" 
                                       class="action-btn bg-gradient-to-br from-green-400 to-green-600 text-white p-3 rounded-xl hover:shadow-lg" 
                                       title="View Post">
                                        <i class="fa fa-eye relative z-10" aria-hidden="true"></i>
                                    </a>
                                    <a href="{% url 'edit_post' post.id %}" 
                                       class="action-btn bg-gradient-to-br from-blue-400 to-blue-600 text-white p-3 rounded-xl hover:shadow-lg" 
                                       title="Edit Post">
                                        <i class="fa fa-pencil relative z-10" aria-hidden="true"></i>
                                    </a>
                                    <form method="POST" action="{% url 'delete_post' post.id %}" class="inline">
                                        {% csrf_token %}
                                        <button type="submit" 
                                                class="action-btn bg-gradient-to-br from-red-400 to-red-600 text-white p-3 rounded-xl hover:shadow-lg" 
                                                title="Delete Post"
                                                onclick="return confirm('Are you sure you want to delete this post?')">
                                            <i class="fa fa-trash relative z-10" aria-hidden="true"></i>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <!-- Empty State -->
            <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-20 text-center animate-fadeInUp">
                <div class="mb-6">
                    <i class="fa fa-file-text text-purple-300 text-8xl mb-4"></i>
                </div>
                <h2 class="text-3xl font-bold gradient-text mb-4">No Posts Yet</h2>
                <p class="text-gray-600 text-lg mb-8 max-w-md mx-auto">Start sharing your thoughts by creating your first post and inspire others with your words!</p>
                <a href="{% url 'create_post' %}" 
                   class="inline-flex items-center gap-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-10 py-4 rounded-2xl font-bold shadow-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                    <i class="fa fa-plus-circle text-xl"></i>
                    <span>Create Your First Post</span>
                </a>
            </div>
        {% endif %}

    </main>

{% endblock %}